@import "_page-color-yellow.sass"
@import "_page-color-emerald.sass"
@import "_page-color-sky.sass"

// Logo

.logo:hover
  filter: $filter-teal


// TYPOGRAPHY ------------

// HEADINGS

// Page title
@mixin page-arrow
  @include icon(arrow-right-line, after)
    display: inline-block
    position: relative
    transition: transform 0.55s $arrow-ease-transition
    transform: translateX(0)
    font-size: 0.9em

// Page sub-title
.hero .content h1 > span
    color: $color-text-alt-reverse

// Page content

.more
  display: none

.block-pages--large
  @include in-page-without-sidebar
  .page
    & .page-title a
      @include stretched-link(before)
    & .page-title a
      font-weight: $heading-font-weight
      text-decoration-line: none
    & .page-title a
      @include page-arrow
    &:hover .page-title a:after
      transform: translateX(0.625rem)

.block-pages--large .page-content
  display: flex
  flex-direction: column
  gap: $spacing-2
  @include media-breakpoint-up(desktop)
    font-size: $signature-size-desktop !important
    line-height: $signature-line-height


.block-pages--cards
  @include grid(2)
  @include grid(3)
  @include in-page-without-sidebar
  @include media-breakpoint-down(desktop)
    .cards .card
      & .more
        display: none
      & .page-title a
        font-weight: $heading-font-weight
        text-decoration-line: none
        @include page-arrow
      &:hover .page-title a:after
        transform: translateX(0.625rem)

.block-pages--cards // TODO à améliorer avec Noesya
  @include grid(2)
  @include grid(3)
  @include in-page-without-sidebar
  @include media-breakpoint-up(desktop)
    .cards .card
      & .more
        display: none
      & .page-title a
        font-weight: $heading-font-weight
        text-decoration-line: none
        @include page-arrow
      &:hover .page-title a:after
        transform: translateX(0.625rem)

.project .project-content
  & .project-title
    margin-bottom: $spacing-2
    & a
      @include stretched-link(before)
      @include page-arrow
  &:hover .project-title a:after
    transform: translateX(0.625rem)

.block-pages
  .block-content article .media
    background-color: $color-background-reverse
    & img
      height: 100%

// TEXTS

// Lead description

.block-pages--list
  @include in-page-without-sidebar
    .top .description p
      font-weight: $body-font-weight

.rich-text ul,
.rich-text ol,
.description ul,
.description ol
  margin: $spacing-3 0
  margin-left: $spacing-3
  list-style-position: $list-style-position
  line-height: $list-line-height
  & li
    margin-bottom: $spacing-2
    &::marker
      font-weight: $meta-font-weight

// Selection

.block-call_to_action p::selection
  background-color: $color-selection-background-accent

// ICONS ------------

p:after,
a:after
  font-weight: inherit !important

// COMPONENTS ------------

// Header

header#document-header .menu,
.has-menu-opened header#document-header .menu
  @include media-breakpoint-up(desktop)
    & a
      text-decoration-line: none
      text-decoration-color: transparent
      &:hover,
      &:active,
      &:active:hover,
      &:focus,
      &:focus:hover
        text-decoration-line: $text-decoration-line
        text-decoration-color: $color-accent
        text-underline-offset: $text-underline-offset
        text-decoration-thickness: $text-decoration-thickness
        transition: text-decoration-color 0.55s ease
    & .active,
    & ul .has-children .dropdown-menu ul li .active
      color: $color-accent

.has-menu-opened
  @include media-breakpoint-up(desktop)
    header#document-header:not(.hero)
      border-bottom: $border-width solid $color-accent
    .menu .has-children .dropdown-menu
      margin-top: pxToRem(31)
      & .active
        color: $color-accent

header#document-header li
  a:after
    color: $color-accent

// Breadcrumb

.page-illustration
  @include media-breakpoint-down(desktop)
  & .breadcrumb-nav
    margin-left: 0
    margin-right: 0

.breadcrumb li
    & a,
    & a:active,
    & a:focus
      text-decoration-line: $text-decoration-line
      text-underline-offset: $text-underline-offset
      text-decoration-thickness: $text-decoration-thickness
      &:hover
        text-decoration-color: $color-accent
    & .active
      color: $color-accent

// Hero

.hero
  @include media-breakpoint-up(desktop)
    margin-bottom: 0
    border-bottom: $border-hero solid $border-color
    & .content .btn:not(.dropdown-share button),
    & .dropdown-share
      margin-top: $spacing-4
    & .hero-text
      padding-right: var(--grid-gutter)
    &--image-square,
    &--image-portrait
      .content figure
        width: calc( (var(--column-width) * 6) + var(--grid-gutter) * ( 5 - 1 ))
  @include media-breakpoint-down(desktop)
    padding-bottom: $spacing-4

.hero-text .has-lead a, .link
  color: $color-text-reverse !important
  text-decoration-line: $text-decoration-line
  text-decoration-color: $color-text-alt-reverse
  text-underline-offset: $text-underline-offset
  text-decoration-thickness: $text-decoration-thickness
  &:hover
    text-decoration-color: $color-accent

.projects__page .hero
  .hero-text
    padding-bottom: 0
  .content figure figcaption,
  &:hover
    color: $color-text-reverse

.projects__page .hero--with-image
  margin-bottom: 0px

.full-width:not(.page-illustration) 
  .hero--image-portrait:where(:not(.has-breadcrumb-hero-end)),
  .hero--image-square:where(:not(.has-breadcrumb-hero-end))
    @include media-breakpoint-down(desktop)
      padding-bottom: $spacing-7
      margin-bottom: 0px

// Buttons

.btn
  font-weight: $btn-font-weight !important

.btn:active,
.btn:focus
  box-shadow: none
  background: $color-background-alt-accent

.projects__page .hero .dropdown-share
  position: initial
  display: flex
  flex-direction: row
  & button
    width: 100%
  & .dropdown-menu
    border: $border-width solid $color-accent
    position: initial
    & a
      padding: 0.75rem 1.5rem
    & a:hover
      color: $color-text
      opacity: 100%
      background-color: $color-background-alt-accent

// Categories

.document-content .taxonomies-container
  margin-bottom: 0px !important
  padding-left: 0
  @include media-breakpoint-down(desktop)
  @include in-page-with-sidebar
    .taxonomies-single
      padding-top: var(--block-space-y)
      margin-bottom: 0px !important
      & .organizations-taxonomies
      & .pages-taxonomies
      & .projects-taxonomies
          margin-bottom: 0px !important

li.terms > a
    background: var(--color-accent)
    text-decoration: none;
    font-weight: $meta-weight
    font-size: $meta-size-desktop
    padding: $category-padding
    border: var(--color-accent) $border-width solid
    transition: all 0.3s ease
    &:hover
      border: $color-primary $border-width solid

.pages_categories__term,
.persons_categories__term,
.organizations_categories__term
  .document-content .container
    padding-top: $spacing-5
  
// Files

.block-files .files li::before
  border: $border-width solid $color-text

abbr
  @include in-page-with-sidebar
    text-decoration: none

// Number keys

.block-key_figures
  margin: 0 !important

// SIDEBAR

.section-sidebar
  background: $color-background-reverse !important
  margin-left: 0 !important
  @include media-breakpoint-down(desktop)
    padding-bottom: $spacing-4 !important

.posts__page:not(.full-width) .post-sidebar,
.projects__page:not(.full-width) .project-sidebar
  margin-left: 0px !important
  margin-bottom: 0px !important
  padding-top: calc(var(--grid-gutter)/2)
  background: $color-background-reverse !important

.blocks .container
  @include in-page-with-sidebar
    padding-left: 0

.pages:not(.publications__sections) .document-content > .container
  @include in-page-without-sidebar
    padding-top: var(--grid-gutter)


// Infos

.post-infos,
.project-infos
  margin-top: 0px !important
  padding: calc(var(--grid-gutter)/2) var(--grid-gutter) !important
  color: $color-text-reverse
  & > li > span
    color: $color-text-alt-reverse !important

.post-infos,
.project-infos
  .toc-container
    width: calc( (var(--column-width) * 4) + var(--grid-gutter) * ( 4 - 1 ))
  
// Table of content

#toc-title,
.toc-title
  color: $color-text-alt-reverse

.toc-container
  @include in-page-with-sidebar
    border-top: 0 !important
    margin: 0 !important
    padding: $spacing-5 var(--grid-gutter) !important
    background: $color-background-reverse
    .toc ol li a
      text-decoration-color: transparent
      text-decoration-line: $text-decoration-line
      text-underline-offset: $text-underline-offset
      text-decoration-thickness: $text-decoration-thickness
      &:hover
        text-decoration-color: $color-accent

// Figcaption

figcaption
  color: $color-text-alt

.projects__page,
.posts__page
   .hero .content figure figcaption
    background: $color-background-reverse !important
  
// Pagination

.siblings-navigation ul a
  padding: var(--grid-gutter)
  transition: all 0.3s ease
  &:hover
    color: $color-text
  span
    font-weight: $btn-font-weight

.siblings-navigation ul
  & .previous,
  & .next
    &:hover
      background: $color-accent

.siblings-navigation ul a
  @include media-breakpoint-up(desktop)
    min-height: pxToRem(218)

.projects__page:not(.full-width) .block-siblings-navigation .container .block-content
  @include media-breakpoint-up(desktop)
    padding-left: calc( calc( (var(--column-width) * 4) + var(--grid-gutter) * ( 3 - 1 )) + var(--grid-gutter)) !important

.publications__page main > .container
  padding-right: 0 !important
  padding-left: 0 !important

.projects__page main
  .document-content .block-siblings-navigation .container
    padding-right: 0
    padding-left: 0

.siblings-navigation
  background: $color-background-alt

.publications__page,
.projects__page
  main
    padding-bottom: 0
  .block-siblings-navigation
    margin-bottom: 0

.siblings-navigation ul
  padding-top: 0
  gap: 0

.pagination li.active
  color: $color-text
  background: $color-accent

.siblings-navigation
  @include media-breakpoint-down(desktop)
    ul .next
      padding-right: var(--grid-gutter)
    ul .previous
      padding-left: var(--grid-gutter)

// Links

.block-links li
  & .link-content
    min-height: $spacing-6
  &:hover,
  & a:hover
    color: $color-text
  
// Footer

footer#document-footer
  border-top: $border-width solid $border-color
  li
    & a,
    & a:active,
    & a:focus
      text-decoration-line: $text-decoration-line
      text-underline-offset: $text-underline-offset
      text-decoration-thickness: $text-decoration-thickness
      &:hover
        text-decoration-color: $color-accent
    & .active
      color: $color-accent
    &:after
      color: $color-accent
  button:after
    color: $color-accent

footer#document-footer .logo img
  @include media-breakpoint-up(desktop)
    height: $header-logo-height-desktop

footer#document-footer .footer-i18n
  & button[aria-expanded="true"]
    min-width: pxToRem(150)
    outline-color: var(--color-accent)
    background: var(--color-accent)
    padding-right: 0
    &::after
      color: var(--color-text)
  & .dropdown-menu a,
  & .dropdown-menu a.is-checked
    padding-top: $spacing-2
    &:hover
      text-decoration-color: var(--color-text)

// SECTIONS ------------


  
// Person & organization

.person,
.organization
  transition: all 0.3s ease

.person:hover .avatar,
.organization:hover .media
  box-shadow: 0px 0px 0px $border-width $color-accent


// BLOCKS ------------

// Call to action

.block-call_to_action
  @include media-breakpoint-down(desktop)
  @include in-page-with-sidebar
  @include in-page-without-sidebar
  @include in-page-with-or-without-sidebar
  .call_to_action .actions a:first-child
    border: $border-width solid $color-text

body:not(.full-width) .block-call_to_action
  @include in-page-with-sidebar
  @include media-breakpoint-up(desktop)
    .call_to_action > div
      padding-left: var(--grid-gutter)
    .container .block-content
      padding-left: calc( calc( (var(--column-width) * 4) + var(--grid-gutter) * ( 4 - 1 )))

// PAGES ------------

  // Main

main.page-with-blocks
  padding-bottom: 0px !important

.page__home,
.persons__section,
.organizations__section
  @include in-page-without-sidebar
  .blocks > .block:first-child:not(.block-call_to_action)
    padding-top: var(--grid-gutter)

.projects__section
  @include in-page-without-sidebar
  .projects:first-child
    padding-top: var(--grid-gutter)

.projects__page
  @include in-page-without-sidebar
  .heading:first-child
    padding-top: var(--grid-gutter)

.publications__page
  @include in-page-without-sidebar
  .document-content > .container
    padding-top: var(--grid-gutter)

.organizations__page
  @include in-page-without-sidebar
  .document-content > .container
    padding-top: var(--grid-gutter)

.document-content
  @include in-page-with-sidebar
  .blocks > .block:first-child:not(.block-call_to_action),
  .block-sitemap,
  .blocks > .heading:first-child
    margin-top: 0
    padding-top: var(--grid-gutter)
  .block:last-child
    margin-bottom: 0


.block:last-child:not(.block-links, .logos-partners, .block-call_to_action, .block-chapter--accent_background, .block.chapter--alt-background, .block-timeline--horizontal, .block-pages--cards, .block-key_figures, .block-siblings-navigation, .block-siblings-navigation)
  padding-bottom: $spacing-5

// LOGOS PARTNERS (NEW STYLE)

.hero,
.footer-logo
  & .logos-partners
    display: flex
    flex-wrap: wrap
    column-gap: var(--grid-gutter)
    row-gap: $spacing-5
    margin-top: $spacing-5
    & .logo-partner
      height: $spacing-4
      & img
        height: 100%
      &::after
        display: none
      &:hover
        filter: $filter-teal

// PUBLICATIONS

.publications__section
  @include media-breakpoint-up(desktop)
    .hero
      margin-bottom: 0
    .publications-statistics
      padding-top: var(--grid-gutter)
      padding-bottom: var(--grid-gutter)

.publications__section
  .document-content .container,
    padding-right: 0
    padding-left: 0
  .publications-statistics,
  .block
    padding-right: var(--grid-gutter)
    padding-left: var(--grid-gutter)

.researchers__term > main > .container
  padding-right: 0
  padding-left: 0

.researchers__term .publication
  padding-bottom: $spacing-4
  padding-top: $spacing-4

.publications .publication
  padding-right: var(--grid-gutter)
  padding-left: var(--grid-gutter)
  padding-top: $spacing-4
  padding-bottom: $spacing-4
  border-bottom: none
  transition: all 0.3s ease
  &::before
    right: var(--grid-gutter)
    color: inherit
  & .publication-title
    font-size: var(--h4-size)
    line-height: var(--h4-line-height)
    & a
      color: $color-text
      font-weight: $heading-font-weight
      &:hover
        color: $color-text
  &:hover
    background: $color-accent

.publication-title,
.publications__section .publication p
  @include media-breakpoint-up(desktop)
    padding-right: calc(var(--column-width) + var(--grid-gutter))

// Person publication

.persons__page .hero--with-image
  @include media-breakpoint-down(desktop)
    padding-bottom: 0px !important

.persons__page main
  padding-bottom: 0

.persons__page main .document-content > .person-objects
  margin-top: 0
  padding-left: 0 !important
  padding-right: 0 !important

.persons__page main > .document-content > .container:first-child
  padding-top: var(--grid-gutter)

.persons__page #shadow-host-companion
  padding-bottom: 0

.person-publications
  padding-top: $spacing-5
  & .top
    margin-bottom: calc(#{$spacing-3} + #{$spacing-2})
  & .top,
  & .publication,
  & .more
    padding-left: var(--grid-gutter)
    padding-right: var(--grid-gutter)
  & .publication
    border-bottom: none
    padding-top: $spacing-3
    padding-bottom: $spacing-3
    transition: all 0.3s ease
    &::before
      right: var(--grid-gutter)
      color: inherit
    & .publication-title
      & a
        color: $color-text
        font-size: var(--h5-size)
        font-weight: $heading-font-weight
        &:hover
          color: inherit
    &:hover
      background: $color-accent


// ILLUSTRATION

.page-illustration
  @include media-breakpoint-up(desktop)
    .hero
      padding-bottom: 0
      & .container
        padding-right: 0
      & .hero-text
        padding-bottom: $spacing-5
      & .content figure
        position: absolute
        bottom: 0
        right: 0
        pointer-events: none
        & picture img
          max-height: pxToRem(538)
          max-width: pxToRem(538)
          float: right
  @include media-breakpoint-down(desktop)
    .hero
      & .container
        padding-left: 0
        padding-right: 0
      & .hero-text
        padding-left: var(--grid-gutter)
        padding-right: var(--grid-gutter)
      & .content figure
        background: $color-background-reverse
        box-sizing: border-box
        pointer-events: none
        & picture img
          pointer-events: none